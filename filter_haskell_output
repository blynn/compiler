#!/bin/bash

# This is temporary code to transform the C code generated by each blynn-compiler stage to a format that is easy to read by vm.
# This can be removed after updating the haskell output from the effectively to the virtually stage.

starting_address=$(grep 'rts_reduce' $1 | sed 's/.*rts_reduce(//' | sed 's/).*//')
prog=$(grep 'prog\[\]' $1 | sed 's/.*prog\[\]={//' | sed 's/};//')

echo $starting_address > $2
echo $prog >> $2
